<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>


  <script>
    // Задача 12.1
    /* Спросите у пользователя телефонный номер и выведете его в нормализованном виде. На вход может прийти номер в формате:
- +79235050505
- 89235050505
- 8 923 5050505
- 7(923) 5050-505
И с любым сочетанием пробелов, скобок и тире.
Программа должна вывести номер в формате: `+79235050505`*/

    let str1 = 'рапавпрвапр';
    let str2 = '89235050505';
    let str3 = '8505';
    let str4 = '7(923) 5050-505';
    let str5 = '7(923))) 5()0)50-5053--';
    let str6 = '++79235050505';
    let str7 = '+792350505b5';

    function toNormalize(str) {
      let result = 'Некорректно введен номер. Попробуйте снова';

      let array = str.split('');

      let noSpecialSymbols = array.filter((item) => item !== ' ').filter((item) => item !== '(').filter((item) => item !== ')').filter((item) => item !== '-');
      console.log(noSpecialSymbols);

      if (noSpecialSymbols[0] === '+') {
        noSpecialSymbols.shift();
      }
      console.log(noSpecialSymbols);


      if (noSpecialSymbols.every((item) => item === '0' || item === '1' || item === '2' || item === '3' || item === '4' || item === '5' || item === '6' || item === '7' || item === '8' || item === '9')) {

        if (noSpecialSymbols.length === 11) {
          if (noSpecialSymbols[0] === '7') {
            noSpecialSymbols.unshift('+')
          } else if (noSpecialSymbols[0] === '8') {
            noSpecialSymbols.shift();
            noSpecialSymbols.unshift('7');
            noSpecialSymbols.unshift('+');
          }

          result = noSpecialSymbols.join('');
        }
      }

      return `
      Ваш ввод: ${str}
      Ваш телефонный номер в нормализованном виде: ${result}`;
    }

    console.log(toNormalize(str1));
    console.log(toNormalize(str2));
    console.log(toNormalize(str3));
    console.log(toNormalize(str4));
    console.log(toNormalize(str5));
    console.log(toNormalize(str6));
    console.log(toNormalize(str7));


    // Задача 12.2
    /* Пользователь вводит строку. Нужно сформировать и вывести массив из всех чисел в этой строке.
    input: 12 Один567два и три78
    output: [ 12, 567, 78 ] */

    const string = ' 12 Один567два и три78';

    function onlyNumbers(str) {
      let resultArray = [];
      let number = '';
      let arrayOfNumbers = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9'];

      for (let i = 0; i < str.length; i++) {
        if (arrayOfNumbers.includes(str[i])) {
          number += str[i];
        } else {
          if (number) {
            resultArray.push(number);
            number = '';
          }
        }
      }

      // если последний символ - число
      if (number) {
        resultArray.push(number);
      }

      return resultArray;
    }

    console.log(onlyNumbers(string));
  </script>
</body>

</html>