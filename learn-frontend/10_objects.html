<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>


  <script>
    // Задача 11.1
    /* Даны два массива, в первом перечислены по порядку названия фильмов, во втором - режиссёры этих фильмов. Написать функцию, которая будет принимать эти два массива, возвращать массив объектов со свойствами: название фильма и режиссёр. */

    // input
    const movieTitles = ["Зеленая миля", "Побег из Шоушенка", "Форрест Гамп", "1+1", "Список Шиндлера"];
    const movieDirectors = ["Фрэнк Дарабонт", "Фрэнк Дарабонт", "Роберт Земекис", "Оливье Накаш", "Стивен Спилберг"];

    // output
    /* [
      {title: "Зеленая миля", director: "Фрэнк Дарабонт"},
      {title: "Побег из Шоушенка", director: "Фрэнк Дарабонт"},
      {title: "Форрест Гамп", director: "Роберт Земекис"},
      {title: "1+1", director: "Оливье Накаш"},
      {title: "Список Шиндлера", director: "Стивен Спилберг"},
    ] */

    function mergeFilms(arrTitles, arrDirectors) {

      let resultArray = [];

      for (let i = 0; i < arrTitles.length; i++) {
        const obj = {};

        obj.title = arrTitles[i];
        obj.director = arrDirectors[i];

        resultArray.push(obj);
      }

      return resultArray;
    }

    console.log(mergeFilms(movieTitles, movieDirectors));


    //   function createMovieInfoList(arrTitles, arrDirectors) {
    // 	if(arrTitles.length != arrDirectors.length) {
    //     throw("Ошибка. Массивы данных рассогласованы. Не совпадает длина массивов.");
    //   }

    //   return arrTitles.map((el, index) => (
    //     { 
    //       title: el,
    //       director: arrDirectors[index],
    //     }
    //   ));
    // }



    // Задача 11.2
    /* Допустим, что с бекенда приходит массив объектов со свойствами: {n: “Алексей”, a: 24, h: “Москва”, p: “курьер”, c: “Toyota”}. Написать функцию, которая будет возвращать новый массив объектов, в которых имена свойств будут соответствовать их значениям, например, n заменится на name и т.д. При выполнении задачи исходный массив самостоятельно дополнить 4-5 объектами. */

    // input
    // [
    // 	{n: "Алексей", a: 24, h: "Москва", p: "курьер", c: "Toyota"},
    // 	{n: "Евгения", a: 32, h: "Тюмень", p: "юрист", c: "Nissan"},
    // 	...
    // ]

    const back = [
      { n: "Алексей", a: 24, h: "Москва", p: "курьер", c: "Toyota" },
      { n: "Евгения", a: 32, h: "Тюмень", p: "юрист", c: "Nissan" },
      { n: "Елена", a: 30, h: "Санкт-Петербург", p: "химик", c: "Лада" },
      { n: "Александр", a: 27, h: "Санкт-Петербург", p: "верстальщик", c: "Ford" },
      { n: "Александр", a: 26, h: "Санкт-Петербург", p: "биотехнолог", c: "Volvo" },
      { n: "Владимир", a: 63, h: "Воронеж", p: "инженер", c: "Ford" },
      { n: "Наталья", a: 45, h: "Казань", p: "стилист", c: "KIA" },
    ];

    // function changeKeyName(array) {
    //   const arrOfArr = array.map((element) => Object.entries(element));

    //   let propertiNames = ['name', 'age', 'home', 'profession', 'car'];

    //   let newArr = arrOfArr.map((element) => {
    //     let count = 0;

    //     for (let key of element) {
    //       key[0] = propertiNames[count];
    //       count++
    //     }

    //     return element;
    //   });

    //   const changedBack = newArr.map((element) => Object.fromEntries(element));

    //   return changedBack;
    // }

    function changeKeyName(array) {
      const newArray = array.map((element) => ({ 'name': element.n, 'age': element.a, 'home': element.h, 'profession': element.p, 'car': element.c }));

      return newArray;
    }


    console.log(back);
    console.log(changeKeyName(back));


    // Задача 11.3
    /* Допустим, что с бекенда приходит массив объектов, в которых одним из свойств является объект пользователей user. Написать функцию, которая будет принимать данный массив и возвращать массив объектов user. При выполнении задачи исходный массив самостоятельно дополнить 4-5 объектами.*/

    // input
    /* [
      {
        id: 1,
        user: {
          id: 101,
          name: "Юрий",
          age: 28,
        },
        city: "Москва",
        role: "author",
      },
      {
        id: 2,
        user: {
          id: 102,
          name: "Юлия",
          age: 20,
        },
        city: "Санкт-Петербург",
        role: "reader",
      },
      ...
    ] */

    // output
    /* [
      {
        id: 101,
        name: "Юрий",
        age: 28,
      },
      {
        id: 102,
        name: "Юлия",
        age: 20,
      },
      ...
    ] */


    const backend = [{
      id: 1,
      user: {
        id: 101,
        name: "Юрий",
        age: 28,
      },
      city: "Москва",
      role: "author",
    },
    {
      id: 2,
      user: {
        id: 102,
        name: "Юлия",
        age: 20,
      },
      city: "Санкт-Петербург",
      role: "reader",
    },
    {
      id: 3,
      user: {
        id: 103,
        name: "Ирина",
        age: 27,
      },
      city: "Санкт-Петербург",
      role: "reader",
    },
    {
      id: 4,
      user: {
        id: 104,
        name: "Глеб",
        age: 44,
      },
      city: "Ижевск",
      role: "reader",
    },
    {
      id: 5,
      user: {
        id: 105,
        name: "Кристина",
        age: 38,
      },
      city: "Иркутск",
      role: "author",
    },
    ];

    function onlyUsers(array) {
      let newArray = array.map((element) => element.user);
      // Почему если в коллбэке поставить не element.user, а this.user, то функция выдает undefined
      return newArray;
    }

    console.log(backend);
    console.log(onlyUsers(backend));


    // Задача 11.4
    /* Допустим, что с бекенда приходят два массива объектов: users и posts. Написать функцию, которая будет объединять эти массивы в один массив объектов. При выполнении задачи исходные массивы самостоятельно дополнить 4-5 объектами.*/

    // input
    // users
    // [
    // 	{
    // 		id: 101,
    // 		name: "Юрий",
    // 	},
    // 	{
    // 		id: 102,
    // 		name: "Анна",
    // 	},
    // 	{
    // 		id: 103,
    // 		name: "Константин",
    // 	},
    // 	...
    // ]
    // // posts
    // [
    // 	{
    // 		id: 1,
    // 		userID: 101,
    // 		title: "Что не так с онлайн-курсами?",
    // 		text: "Привет! Меня зовут Юрий, и сегодня я хочу поговорить об онлайн-курсах программирования."
    // 	},
    // 	{
    // 		id: 2,
    // 		userID: 101,
    // 		title: "Что за черт, Javascript",
    // 		text: "Этот пост — список забавных и хитрых примеров на JavaScript. Это отличный язык. У него простой синтаксис, большая экосистема и, что гораздо важнее, огромное сообщество."
    // 	},
    // 	{
    // 		id: 3,
    // 		userID: 103,
    // 		title: "Работа с часовыми поясами в JavaScript",
    // 		text: "Недавно я работал над задачей добавления часовых поясов в JS-библиотеку календаря, которую ведёт моя команда."
    // 	},
    // 	...
    // ]

    // // output
    // [
    // 	{
    // 		id: 1,
    // 		author: "Юрий",
    // 		title: "Что не так с онлайн-курсами?",
    // 		text: "Привет! Меня зовут Юрий, и сегодня я хочу поговорить об онлайн-курсах программирования."
    // 	},
    // 	{
    // 		id: 2,
    // 		author: "Юрий",
    // 		title: "Что за черт, Javascript",
    // 		text: "Этот пост — список забавных и хитрых примеров на JavaScript. Это отличный язык. У него простой синтаксис, большая экосистема и, что гораздо важнее, огромное сообщество."
    // 	},
    // 	{
    // 		id: 3,
    // 		author: "Константин",
    // 		title: "Работа с часовыми поясами в JavaScript",
    // 		text: "Недавно я работал над задачей добавления часовых поясов в JS-библиотеку календаря, которую ведёт моя команда."
    // 	},
    // 	...
    // ]

    const users = [
      { id: 101, name: "Юрий", },
      { id: 102, name: "Анна", },
      { id: 103, name: "Константин", },
    ];
    const posts = [
      {
        id: 1, userID: 101, title: "Что не так с онлайн-курсами?", text: "Привет! Меня зовут Юрий, и сегодня я хочу поговорить об онлайн-курсах программирования."
      },
      {
        id: 2, userID: 101, title: "Что за черт, Javascript", text: "Этот пост — список забавных и хитрых примеров на JavaScript. Это отличный язык. У него простой синтаксис, большая экосистема и, что гораздо важнее, огромное сообщество."
      },
      {
        id: 3, userID: 103, title: "Работа с часовыми поясами в JavaScript", text: "Недавно я работал над задачей добавления часовых поясов в JS-библиотеку календаря, которую ведёт моя команда."
      },
    ];

    function mergeObjects(arrayPosts, arrayUsers) {
      let newArray = [];

      for (let i = 0; i < arrayPosts.length; i++) {
        let obj = Object.assign(arrayPosts[i], arrayUsers[i]);

        delete obj.userID;

        newArray.push(obj);
      }

      return newArray
    }

    console.log(mergeObjects(users, posts))



    // function mergeObjects(arrayUsers, arrayPosts) {
		// 	const newArray = arrayPosts.map((post, index) => {
    //     let obj = {id: post.id,
    //                title: post.title,
    //                text: post.text,
    //                author: arrayUsers.find((element) => {
    //                		if (element.id === post.userID) {
    //                    return true;
    //                  }
    //                }).name
    //               }
      
    //     return obj;
    //     });
      
    //   return newArray;
    // }

    // console.log(mergeObjects(users, posts))


    // function mergeObjects(arrayUsers, arrayPosts) {
		// 	return arrayPosts.map((post, index) => ({
    //     id: post.id,
    //     title: post.title,
    //     text: post.text,
    //     author: arrayUsers.find((element) => element.id === post.userID)?.name,
    //    }));
    // }

    // console.log(mergeObjects(users, posts))


    // function mergeObjects(arrayUsers, arrayPosts) {
    // 			return arrayPosts.map((post, index) => ({
    // 				...post,
        
    //     author: arrayUsers.find((element) => element.id === post.userID)?.name,
    //     userID: undefined,
    //    }));
    // }
    
    // console.log(mergeObjects(users, posts))



    // Pflfxf 5

//     function methodsAndValuesExchange(obj){
//   return Object.keys(obj).reduce((newObj, key)=>
//                                   {
//                                     newObj[obj[key]] = key;
//                                     return newObj;
//                                   }, {});
  
// }


// function methodsAndValuesExchange(obj){
//   return Object.entries(obj).reduce((newObj, [key, value])=>
//                                   {
//                                     newObj[value] = key;
//                                     return newObj;
//                                   }, {});
  
// }


// function methodsAndValuesExchange(obj){
//   const arr = Object.entries(obj).map(([key, value]) => [value, key]);
  
//   return Object.fromEntries(arr);
// }


// Задача 6

// function convertCameraBarierObject(obj){
//   let devices = obj.devices;
//   let cameras = obj.cameras;
//   return devices.map(barier =>
//      ({
//        id: barier.id,
//        name: barier.name,
//        cameras: barier.cameraIDs.map(cam => (
//                       {
//                         id:cam, 
//                         name: cameras.find(camItem => camItem.id == cam).name
//                       }))
//        }));
// }


// function convertCameraBarierObject(obj){
//   const {devices, cameras} = obj;
 
//   return devices.map(barier =>
//      ({
//        id: barier.id,
//        name: barier.name,
//        cameras: cameras.filter((camera) => barier.cameraIDs.includes(camera.id)),
//        }));
// }


// function convertCameraBarierObject(obj){
//   const {devices, cameras} = obj;
 
//   return devices.map(barier =>
//      ({
// 				...barier,
//        	cameras: cameras.filter((camera) => barier.cameraIDs.includes(camera.id)),
//     		cameraIDs: undefined,
//        }));
// }
  </script>
</body>

</html>